!function(t,e){"object"==typeof exports&&"undefined"!=typeof module?module.exports=e():"function"==typeof define&&define.amd?define(e):(t="undefined"!=typeof globalThis?globalThis:t||self).innerSVG=e()}(this,(function(){"use strict";function t(t,e,n,i){return new(n||(n=Promise))((function(s,o){function a(t){try{d(i.next(t))}catch(t){o(t)}}function r(t){try{d(i.throw(t))}catch(t){o(t)}}function d(t){var e;t.done?s(t.value):(e=t.value,e instanceof n?e:new n((function(t){t(e)}))).then(a,r)}d((i=i.apply(t,e||[])).next())}))}function e(t){return n.findIndex((e=>e.element===t))}const n=[];class i{constructor(t,e){this.element=t,this.path=e,n.push({element:t,instance:this}),this.path=this.initPath(e),this.init()}init(){return t(this,void 0,void 0,(function*(){this.svg&&this.svg.remove(),yield this.loadSVG(),this.setSameAttributes(),this.element.style.display="none",this.element.parentNode.insertBefore(this.svg,this.element)}))}loadSVG(){return t(this,void 0,void 0,(function*(){const t=yield fetch(this.path),e=yield t.text();this.svg=this.initSVG(e)}))}initSVG(t){const e=document.createElement("div");e.innerHTML=t;for(const t of e.childNodes)if(t instanceof SVGElement)return t;throw this.destruct(),new Error(this.path+" is not a valid SVG")}setSameAttributes(){for(const t of this.element.attributes)"data-i-svg"!==t.name&&"id"!==t.name&&this.svg.setAttribute(t.name,t.value);"none"===this.element.style.display&&(this.svg.style.display="")}initPath(t){var e;const n=document.location.pathname.split("/");(null===(e=n[n.length-1])||void 0===e?void 0:e.includes("."))&&n.pop();const i=n.join("/");return t.startsWith("/")?t:i+"/"+t}updatePath(t){this.path=this.initPath(t),this.init()}destruct(){const t=e(this.element);this.element.removeAttribute("data-i-svg"),this.element.style.display="",this.svg.remove(),n.splice(t,1)}}function s(t){var n;for(const s of t){const t=-1!==e(s),o=void 0===(null===(n=s.dataset)||void 0===n?void 0:n.iSvg);t||o||new i(s,s.dataset.iSvg)}}return document.addEventListener("DOMContentLoaded",(function(){s(document.querySelectorAll("[data-i-svg]")),new MutationObserver((function(t){const i=[];for(const s of null!=t?t:[]){if("attributes"===s.type){const t=s.target,o=e(t);if(-1===o)i.push(t);else{const e=t.dataset.iSvg;n[o].instance.updatePath(e)}}for(const t of s.addedNodes)i.push(t);for(const t of s.removedNodes){const i=e(t);-1!==i&&n[i].instance.destruct()}}i.length>0&&s(i)})).observe(document.body,{childList:!0,subtree:!0,attributes:!0})})),function(t,e){return new i(t,e)}}));
//# sourceMappingURL=inner-svg.js.map
